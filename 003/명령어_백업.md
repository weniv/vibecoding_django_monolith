# Django 웹 애플리케이션 구축 가이드

* 아래 순서는 선호도에 따라 바뀔 수 있습니다. 보통 2개정도만 설계가 되고 작업에 들어가도 MVP 수준에서는 문제가 없습니다.
    1. URL 설계
    2. 데이터베이스 설계

## URL 설계
```
'/' : 홈 페이지
'/about': 소개 페이지
'/contact': 연락처 페이지
'/blog': 블로그 메인 페이지
'/blog/1': 블로그 1번 글 페이지
'/blog/2': 블로그 2번 글 페이지
'/blog/태그명': 특정 태그의 블로그 글 페이지
'/admin': 관리자 페이지
```

## 초기 세팅 명령어 (Windows)
```bash
python -m venv venv
.\venv\Scripts\activate
pip install django
django-admin startproject config .
```

## 초기 세팅 명령어 (Mac/Linux)
```bash
python3 -m venv venv
source venv/bin/activate
pip install django
django-admin startproject config .
```

## 프로젝트 구성 단계

### 1. settings.py 설정
```python
# config/settings.py
ALLOWED_HOSTS = ["*"]
```

### 2. 데이터베이스 마이그레이션 및 서버 실행
```bash
python manage.py migrate
python manage.py runserver
```

### 3. main 앱 생성
```bash
python manage.py startapp main
```

### 4. settings.py에 앱 등록
```python
# config/settings.py
INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'main',  # 추가
]
```

### 5. 프로젝트 URL 설정
```python
# config/urls.py
from django.contrib import admin
from django.urls import path, include
# include는 다른 앱의 url을 포함시킬 때 사용

urlpatterns = [
    path("admin/", admin.site.urls),
    path("", include("main.urls")),  # main 앱의 urls.py를 포함시키기 위해 추가
]
```

### 6. main 앱 URL 설정
```python
# main/urls.py (새로 생성)
from django.urls import path
from . import views

urlpatterns = [
    # path(URL, 함수이름 또는 메서드 이름, URL패턴 이름)
    path("", views.home, name="home"),
    path("about/", views.about, name="about"),
    path("contact/", views.contact, name="contact"),
    path("blog/", views.blog_index, name="blog_index"),
    path("blog/<int:post_id>/", views.blog_post, name="blog_post"),
    path("blog/<str:tag_name>/", views.blog_tag, name="blog_tag"),  # 태그별 블로그 글 페이지
]
```

### 7. 뷰 함수 작성
```python
# main/views.py
from django.http import HttpResponse


def home(request):
    return HttpResponse("홈 페이지")


def about(request):
    return HttpResponse("소개 페이지")


def contact(request):
    return HttpResponse("연락처 페이지")


def blog_index(request):
    return HttpResponse("블로그 메인 페이지")


def blog_post(request, post_id):
    return HttpResponse(f"블로그 글 페이지: {post_id}")


def blog_tag(request, tag_name):
    return HttpResponse(f"'{tag_name}' 태그의 블로그 글 페이지")
```

### 8. 서버 실행 및 테스트
```bash
python manage.py runserver
```

## 접속 URL 확인
- http://127.0.0.1:8000/ : 홈 페이지
- http://127.0.0.1:8000/about : 소개 페이지
- http://127.0.0.1:8000/contact : 연락처 페이지
- http://127.0.0.1:8000/blog : 블로그 메인 페이지
- http://127.0.0.1:8000/blog/1 : 블로그 1번 글 페이지
- http://127.0.0.1:8000/blog/2 : 블로그 2번 글 페이지
- http://127.0.0.1:8000/blog/python : 'python' 태그의 블로그 글 페이지
- http://127.0.0.1:8000/admin : 관리자 페이지

## 주의사항
- `/blog/<int:post_id>/`와 `/blog/<str:tag_name>/`의 순서가 중요합니다
- 숫자로만 구성된 URL은 `<int:post_id>` 패턴에 먼저 매칭됩니다
- 문자가 포함된 URL은 `<str:tag_name>` 패턴에 매칭됩니다
